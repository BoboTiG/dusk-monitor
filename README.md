# Dusk Node Monitoring

A minimalist dashboard for your Dusk node (go to the [preview](#preview), and check [similar projects](#similar-projects)). Here is [how to set up a node, in French](https://www.tiger-222.fr/luma/blockchain/node-dusk.html).

> [!TIP]
> Dusk wallet for tips:
> ```
> VKZpBrNtEeTobMgYkkdcGiZn8fK2Ve2yez429yRXrH4nUUDTuvr7Tv74xFA2DKNVegtF6jaom2uacZMm8Z2Lg2J
> ```

## Install

```bash
python3 -m venv venv
. ./venv/bin/activate
python -m pip install -r requirements.txt
```

## Run

1. Start the local [web server](#web-server).
   - Open the [dashboard](http://localhost:1923) for the setup (and for later updates, you can directly go to the [/setup](http://localhost:1923/setup) page).
1. Set up the [cron job](#update-data).
1. That's it!

### Environment Variables

- `DATA_DIR=path/to/folder`: the folder where node data will be stored, it's highly recommended using a folder outside the repository.
- `DEBUG=1`: print more details.

## Commands

### Update Data

The first time, it will scan the entire blockchain for blocks generated by the node, and subsequent calls will only fetch new blocks since the last run.

Here is the cron job to update data every 5 minutes:

```bash
*/5 * * * * cd /path/to/dusk-monitor && DATA_DIR=../dusk-monitor-data/node-1 ./venv/bin/python -m app --update
```

### Web Server

Start the local web server at [http://localhost:1923](http://localhost:1923):

```bash
DATA_DIR=../dusk-monitor-data/node-1 python -m app
```

## Preview

So far, we display:

- The current synchronized block (in red + a warning sign when behind the latest block).
- The slash count (in red + a warning sign when they happen).
- The generated blocks count.
- The current rewards value (+ an estimated total rewards accumulated so far).
- The history of the past hour.

> [!NOTE]
> Those screenshots might be outdated, but the essence of the dashboard is still relevant from those pictures.
> Also, if you have any **design skills**, please take a look at [#5](https://github.com/BoboTiG/dusk-monitor/issues/5) 🙏

On desktop:

![Preview on a large screen](./screenshots/dusk-monitoring-large-screen.png)

On smartphone:

<img src="./screenshots/dusk-monitoring-small-screen.png" width="50%"/>
